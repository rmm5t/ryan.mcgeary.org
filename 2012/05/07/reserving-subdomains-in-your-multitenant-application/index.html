<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
<meta content='width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no' name='viewport'>
<link href='/favicon.ico' rel='icon' type='image/x-icon'>
<link href='http://feeds.feedburner.com/ryanmcgeary' rel='alternate' title='' type='application/atom+xml'>
<title>
Reserving Subdomains in Your Multi-Tenant Web Application - Ryan McGeary
</title>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
<link href="/stylesheets/all.css" rel="stylesheet" type="text/css" />
<!--[if lt IE 9]>
<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv-printshiv.min.js" type="text/javascript"></script>
<![endif]-->
</head>
<body class='x2012 x2012_05 x2012_05_07 x2012_05_07_reserving-subdomains-in-your-multitenant-application x2012_05_07_reserving-subdomains-in-your-multitenant-application_index'>
<div id='background'></div>
<div id='photo'><img src="/images/ryan.mcgeary.png" /></div>
<header id='masthead' role='banner'>
<p class='sr-only'><a rel="home" href="/">Ryan McGeary</a></p>
<div class='sm-controls'>
<a class="btn" data-toggle="class" data-target="#sidebar, #background, #photo, #masthead .logo" data-class="expand" href="#"><i class='fa fa-bars fa-2x'></i>
</a></div>
<div class='logo'><a href="/">Ryan McGeary</a></div>
</header>
<section id='sidebar'>
<div class='container'>
<aside>
<h2 id="about-me">About Me</h2>

<p><a href="/">Ryan McGeary</a> is a software consultant, business starter,
rubyist, web guru, CrossFit enthusiast, and amateur
triathlete. Ryan owns <a href="http://mcgearygroup.com">McGeary Consulting
Group</a> and is the founder of
<a href="http://busyconf.com">BusyConf</a> and
<a href="http://chargestack.com">ChargeStack</a>. He lives near Boulder,
Colorado.</p>

<p><a href="http://twitter.com/rmm5t">Follow me</a>, <a href="https://www.linkedin.com/in/ryanmcgeary">view my
résumé</a>, or
<a href="http://feeds.feedburner.com/ryanmcgeary">subscribe</a>.</p>


</aside>
<nav>
<h2><a href="/blog/">Recent</a></h2>
<ul class='list-unstyled'>
<li>
<a href="/2015/05/12/cloud-services-you-should-be-using-to-build-your-startup/">Talk: Cloud Services You Should Be Using To Build Your Startup</a>
</li>
<li>
<a href="/2014/08/20/html5-autocomplete-cheatsheet/">HTML5 Autocomplete Cheatsheet</a>
</li>
<li>
<a href="/2014/02/19/busyconf-1-million-cups-st-pete/">Talk: The BusyConf Story</a>
</li>
<li>
<a href="/2013/12/20/interview-with-eventtech-podcast/">Interview with #EventTech Podcast</a>
</li>
<li>
<a href="/2013/12/19/continuous-integration-deployment-middleman-codeship-github-pages/">Continuous Integration and Deployment with Middleman, Codeship, and GitHub Pages</a>
</li>
<li>
<a href="/2013/12/05/what-makes-someone-successful-tedx/">TEDx Talk: What makes someone Successful?</a>
</li>
</ul>
<h2><a href="/blog/">Topics</a></h2>
<ul class='list-unstyled'>
<li>
<a href="/screencasts/">screencasts</a>
</li>
<li>
<a href="/talks/">talks</a>
</li>
<li>
<a href="/programming/">programming</a>
</li>
<li>
<a href="/business/">business</a>
</li>
<li>
<a href="/tech/">tech</a>
</li>
<li>
<a href="/interviews/">interviews</a>
</li>
<li>
<a href="/podcasts/">podcasts</a>
</li>
</ul>
<h2><a href="/blog/">Archive</a></h2>
<ul class='list-unstyled'>
<li>
<a href="/2015/">2015</a>
</li>
<li>
<a href="/2014/">2014</a>
</li>
<li>
<a href="/2013/">2013</a>
</li>
<li>
<a href="/2012/">2012</a>
</li>
<li>
<a href="/2011/">2011</a>
</li>
<li>
<a href="/2010/">2010</a>
</li>
<li>
<a href="/2008/">2008</a>
</li>
</ul>
</nav>
<aside>
<h2><a href="http://feeds.feedburner.com/ryanmcgeary">RSS</a></h2>
</aside>
<footer>
Copyright &copy; 2015
<br>
Ryan McGeary
<br>
All rights reserved.
</footer>
</div>
<footer></footer>
</section>
<div class='content-wrapper'>
<section id='content'>
<div class='container'><article>
<h1>
Reserving Subdomains in Your Multi-Tenant Web Application
<small class='text-nowrap'>May  7, 2012</small>
</h1>

<p>It’s fairly common to segment the accounts in your multi-tenant application with
subdomains. <a href="http://github.com">GitHub</a> gives you a subdomain that matches your
username
(e.g. <a href="http://rmm5t.github.io"><strong>rmm5t</strong>.github.io</a>). <a href="https://mcgearygroup.freshbooks.com/refer/www">Freshbooks</a> gives you a subdomain that matches your company name
(e.g. <a href="http://busyconf.freshbooks.com"><strong>busyconf</strong>.freshbooks.com</a>).  At
<a href="http://busyconf.com">BusyConf</a>, we give you a subdomain that matches your
conference name
(e.g. <a href="http://railsconf2012.busyconf.com"><strong>railsconf2012</strong>.busyconf.com</a>).</p>

<p>Your customers usually get to choose their own subdomain during account sign-up,
and when developing a subdomain-based multi-tenant application, it easy to
forget to reserve some common subdomains for your own use and future
growth. There’s nothing like trying to register a new service only to realize
that one of your customers already has the subdomain that you had hoped to use.</p>

<p>It’s a good idea to make a list of subdomains that you don’t want your
customers to use. Here’s a list of subdomains that I like to reserve in my
multi-tenant applications:</p>

<blockquote>
  <p><em>admin, api, assets, blog, calendar, camo, dashboard, demo, developer, developers, docs, files, ftp, git, imap, lab, m, mail, manage, mx, pages, pop, sites, smtp, ssl, staging, status, support, www</em></p>
</blockquote>

<p>What subdomains are missing from this list?</p>

<p>In terms of an <code>ActiveModel</code> validation in Rails, that looks something like this:</p>

<pre class="highlight ruby"><code><span class="no">RESERVED_SUBDOMAINS</span> <span class="o">=</span> <span class="sx">%w(
  admin api assets blog calendar camo dashboard demo developer developers docs files ftp git imap lab m mail manage mx pages pop sites smtp ssl staging status support www
)</span>
<span class="n">validates_exclusion_of</span> <span class="ss">:subdomain</span><span class="p">,</span> <span class="ss">:in</span> <span class="o">=&gt;</span> <span class="no">RESERVED_SUBDOMAINS</span><span class="p">,</span>
                       <span class="ss">:message</span> <span class="o">=&gt;</span> <span class="s2">"Subdomain %{value} is reserved."</span>
</code></pre>


<hr>
<a class="twitter-share-button" data-url="http://ryan.mcgeary.org/2012/05/07/reserving-subdomains-in-your-multitenant-application/" data-text="Reserving Subdomains in Your Multi-Tenant Web Application" data-via="rmm5t" data-related="rmm5t" data-size="large" href="https://twitter.com/share">Tweet</a>
<a class="twitter-follow-button" data-show-count="true" data-size="large" href="https://twitter.com/rmm5t">Follow @rmm5t</a>
<br>
<div class="g-plus" data-action="share" data-annotation="bubble" data-href="http://ryan.mcgeary.org/2012/05/07/reserving-subdomains-in-your-multitenant-application/" data-height="28"></div>

<p>
<em>
Please share to comment, or
<a href="https://twitter.com/rmm5t">follow me</a>
for more.
</em>
</p>

</article>
</div>
</section>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" type="text/javascript"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/javascripts/all.js" type="text/javascript"></script>
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-604149-3', 'auto');
  ga('send', 'pageview');
</script>
<script src="https://apis.google.com/js/platform.js" type="text/javascript" async="true" defer="defer"></script>
</body>
</html>
